<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>使用Docker部署前端应用 | CY的笔记</title><meta name="author" content="崔渊"><meta name="copyright" content="崔渊"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="什么是 Dockerdocker 是一个容器化的平台。用于构建和发布应用程序。构建和发布，前端同学首先联想到的就是那个“老夫一把梭”的方案前端项目本地压缩后，html 文件存入 redis，其他 css、js、图片等资源直接上传 CDN。或者是更干脆一点，直接所有前端项目资源压缩后都传到 CDN。然后在网关或者后端服务的服务器上借住 Nginx 将默认端口代理到 html 文件的 CDN 地址。如">
<meta property="og:type" content="article">
<meta property="og:title" content="使用Docker部署前端应用">
<meta property="og:url" content="https://yuancy1009.github.io/2022/06/29/%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8/index.html">
<meta property="og:site_name" content="CY的笔记">
<meta property="og:description" content="什么是 Dockerdocker 是一个容器化的平台。用于构建和发布应用程序。构建和发布，前端同学首先联想到的就是那个“老夫一把梭”的方案前端项目本地压缩后，html 文件存入 redis，其他 css、js、图片等资源直接上传 CDN。或者是更干脆一点，直接所有前端项目资源压缩后都传到 CDN。然后在网关或者后端服务的服务器上借住 Nginx 将默认端口代理到 html 文件的 CDN 地址。如">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fstatic001.infoq.cn%2Fresource%2Fimage%2F6e%2F24%2F6e1baf91e53fce11a3e242797e747424.jpg&refer=http%3A%2F%2Fstatic001.infoq.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659079619&t=3d0593a933fc2dba281057a727b00e93">
<meta property="article:published_time" content="2022-06-29T06:27:44.000Z">
<meta property="article:modified_time" content="2022-06-29T07:30:26.970Z">
<meta property="article:author" content="崔渊">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fstatic001.infoq.cn%2Fresource%2Fimage%2F6e%2F24%2F6e1baf91e53fce11a3e242797e747424.jpg&refer=http%3A%2F%2Fstatic001.infoq.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659079619&t=3d0593a933fc2dba281057a727b00e93"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="https://yuancy1009.github.io/2022/06/29/%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '使用Docker部署前端应用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-29 15:30:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a></div></div></div><hr/></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">CY的笔记</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">使用Docker部署前端应用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-29T06:27:44.000Z" title="发表于 2022-06-29 14:27:44">2022-06-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-06-29T07:30:26.970Z" title="更新于 2022-06-29 15:30:26">2022-06-29</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="使用Docker部署前端应用"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><h2 id="什么是-Docker"><a href="#什么是-Docker" class="headerlink" title="什么是 Docker"></a>什么是 Docker</h2><p>docker 是一个容器化的平台。用于构建和发布应用程序。<br>构建和发布，前端同学首先联想到的就是那个“老夫一把梭”的方案<br>前端项目本地压缩后，html 文件存入 redis，其他 css、js、图片等资源直接上传 CDN。<br>或者是更干脆一点，直接所有前端项目资源压缩后都传到 CDN。然后在网关或者后端服务的服务器上借住 Nginx 将默认端口代理到 html 文件的 CDN 地址。<br>如果是无服务的纯前端项目确实用不上 docker<br>但是作为一个有经验的前端，我们或多或少都接触过 nodejs 项目。无论是 express、egg 还是 nuxt、next 项目，我们或许都经历过从最初的直接把 node 项目怼到服务器上运行，到后来逐渐开始使用 pm2 来管理多个 node 服务进程的过程。</p>
<h2 id="docker跟虚拟机有什么区别？"><a href="#docker跟虚拟机有什么区别？" class="headerlink" title="docker跟虚拟机有什么区别？"></a>docker跟虚拟机有什么区别？</h2><p>虚拟机和 docker 从某种意义上讲都是隔离的思想，但是他们隔离的东西并不一样。虚拟机是利用内存分配隔离了整个操作系统层面的，而 docker 只是隔离应用程序层面的。<br>虚拟机启动过程缓慢，且占用了一套不必要的系统资源所需要的内存。而Docker可以进行秒启动，因为Docker跳过了系统初始化可以直接使用当前系统。<br>总结一下就是，docker 技术比虚拟机在应用级隔离、弹性伸缩、快速拓展方面更加突出。</p>
<h2 id="docker-技术的优势"><a href="#docker-技术的优势" class="headerlink" title="docker 技术的优势"></a>docker 技术的优势</h2><p>Docker 的思想是集装箱思想，具有持续集成、版本控制、可移植性、隔离性和安全性等优势。<br>docker 的设计思想是将代码及其依赖的运行环境打包成一个包，这个包官方称为镜像（可以理解为某一个集装箱）。然后去服务器上从远程（docker 仓库）拉下这个包，运行这个镜像，就产生来了一个容器。这个容器相当于在服务器上场景再现，重新还原出了你代码之前打包时的状态。<br>如果你本地已经压缩过代码，那么当服务器拉下这个镜像并依据这个镜像运行这个容器后，这个容器里就会包含你之前压缩过的代码及其之前安装的一切环境，如 nodejs、redis、nginx、pm2 等。<br>这样程序员最怕的上线过程就变成了：将一套你在本地弄好的代码+运行环境，直接搬到了服务器上运行即可。</p>
<h2 id="前端使用-docker-有哪些好处？"><a href="#前端使用-docker-有哪些好处？" class="headerlink" title="前端使用 docker 有哪些好处？"></a>前端使用 docker 有哪些好处？</h2><h3 id="部署高效，且利于项目迁移"><a href="#部署高效，且利于项目迁移" class="headerlink" title="部署高效，且利于项目迁移"></a>部署高效，且利于项目迁移</h3><pre><code>node 项目传统的部署步骤
    1.拉取项目代码
    2.npm install、npm run build 及上传静态资源到 CDN
    3.将构建物传递给目标服务器的指定目录
    4.去目标服务器的指定目录启动 node 服务完成部署
node 项目使用 docker 容器化后的部署步骤：
    1.在本地先拉取一个 nodejs 的基础镜像，并以此镜像启动一个容器
    2.在该容器里 npm install、npm run build 及上传静态资源到 CDN，并将该容器打包上传到远程镜像仓库
    3.去服务器拉起该镜像，启动 node 服务即可访问到你想要的node 服务和对应的前端资源
</code></pre>
<p>特别是对于项目迁移，已经使用 docker 技术的项目，迁移起来根本不费事。因为已经将代码和运行环境带包成了一个整体，迁到哪个服务器上就去哪个服务器拉这个已经制作好的镜像就好了。</p>
<h3 id="标准化了运行环境，部署更加稳定可靠"><a href="#标准化了运行环境，部署更加稳定可靠" class="headerlink" title="标准化了运行环境，部署更加稳定可靠"></a>标准化了运行环境，部署更加稳定可靠</h3><p>docker 技术最大的优点就是为各个不同的代码环境（或服务器）磨平了环境差异，为你的代码提供了开发-测试-生产一模一样的运行环境。<br>这个在 docker 技术出现之前是几乎很难做到的，因为造成造成你代码运行环境不一致的因素太多了，比如操作系统种类、操作系统版本、node 版本、node modules 包的版本（总有些包没有被锁死版本）及一些基础依赖包如 Nginx、pm2、redis 等的版本。<br>经常会遇到同一份代码本地运行没问题，但是到了测试或线上却出现了莫名其妙的问题。有的甚至在构建过程中都会直接出错，而我本地却没有这种情况。</p>
<h3 id="更易于持续交付和部署-CI-CD"><a href="#更易于持续交付和部署-CI-CD" class="headerlink" title="更易于持续交付和部署(CI/CD)"></a>更易于持续交付和部署(CI/CD)</h3><p>现代化软件开发强调持续集成和交付，这就要求我们构建和部署的过程要非常高效。<br>Docker 部署配合 GitLab CI 的方式让我们的部署流程更加的自动化、简单化和高效。<br>这完全是 devOps 的思想。CI/CD 创造了一种实时反馈回路机制，持续地传输小型迭代更改，从而加速更改，提高质量。CI 环境通常是完全自动化的，通过 git 推送命令触发自动构建和打包新镜像，然后推送到 Docker 镜像库，最后使用 Python 脚本自动拉取该新镜像，并启动 node 服务。<br>这整个过程一条龙服务，从你提交代码合到对应测试分支之后，你就再也不用再考虑任何事了。一切都是高效、自动化的，交付速度提高至少好几倍。</p>
<h3 id="运维更加高效，秒级回滚"><a href="#运维更加高效，秒级回滚" class="headerlink" title="运维更加高效，秒级回滚"></a>运维更加高效，秒级回滚</h3><p>如果理解了镜像包的概念，秒级回滚这个就不难理解了。你每打一个镜像就相当于一个版本。<br>如果你上线后突然发现有问题或者发了不该发的代码，这个时候你只需要找到之前稳定的镜像包并在服务器上重新拉取，运行对应的服务就可以了。</p>
<h2 id="使用Docker"><a href="#使用Docker" class="headerlink" title="使用Docker"></a>使用Docker</h2><h3 id="创建Dockerfile"><a href="#创建Dockerfile" class="headerlink" title="创建Dockerfile"></a>创建Dockerfile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在项目根目录下创建Dockerfile文件。</span><br></pre></td></tr></table></figure>
<h3 id="编写Dockerfile"><a href="#编写Dockerfile" class="headerlink" title="编写Dockerfile"></a>编写Dockerfile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定 node 版本号，满足宿主环境</span></span><br><span class="line">FROM harbor.huaun.com:11443/common/node:2.0</span><br><span class="line">​</span><br><span class="line"><span class="comment"># 作者</span></span><br><span class="line">MAINTAINER xxx&lt;xxx.com&gt;</span><br><span class="line">​</span><br><span class="line"><span class="comment"># 指定工作目录，将代码添加至此</span></span><br><span class="line">WORKDIR /h-vul-main</span><br><span class="line">ADD node_modules /h-vul-main/node_modules</span><br><span class="line">ADD .nuxt /h-vul-main/.nuxt</span><br><span class="line">ADD static /h-vul-main/static</span><br><span class="line">ADD nuxt.config.js /h-vul-main</span><br><span class="line">ADD package.json /h-vul-main</span><br><span class="line">​</span><br><span class="line">EXPOSE 11000</span><br><span class="line">CMD [<span class="string">&quot;npm&quot;</span>, <span class="string">&quot;run&quot;</span>, <span class="string">&quot;start&quot;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="打包镜像"><a href="#打包镜像" class="headerlink" title="打包镜像"></a>打包镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t harbor.huaun.com:11443/<span class="variable">$&#123;path&#125;</span>:<span class="variable">$&#123;tag&#125;</span> .</span><br><span class="line">docker build -t harbor.huaun.com:11443/h-wei/h-vul-overview:0.0.3 .</span><br></pre></td></tr></table></figure>
<h3 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker push <span class="variable">$&#123;path&#125;</span></span><br><span class="line">docker push harbor.huaun.com:11443/h-wei/h-vul-overview:0.0.3</span><br></pre></td></tr></table></figure>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name h-vul-overview --net=host harbor.huaun.com:11443/h-wei/h-vul-overview:0.0.3</span><br></pre></td></tr></table></figure>
<h2 id="CI配置"><a href="#CI配置" class="headerlink" title="CI配置"></a>CI配置</h2><h3 id="根目录新增-gitlab-ci-yml"><a href="#根目录新增-gitlab-ci-yml" class="headerlink" title="根目录新增.gitlab-ci.yml"></a>根目录新增.gitlab-ci.yml</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 环境变量</span></span><br><span class="line">variables:</span><br><span class="line">  CI_PROJECT_DIR: /home/gitlab-runner/<span class="built_in">test</span>/h-public-report</span><br><span class="line">  SERVICE_TAG: 1.0.0</span><br><span class="line">  GIT_STRATEGY: <span class="built_in">clone</span></span><br><span class="line"><span class="comment"># 定义CI执行的4个阶段</span></span><br><span class="line">stages:</span><br><span class="line">  - pull</span><br><span class="line">  - build</span><br><span class="line">  - deploy</span><br><span class="line">  - push</span><br><span class="line"></span><br><span class="line"><span class="comment">###################################【git pull code】start ###################################</span></span><br><span class="line">pull-code-job:</span><br><span class="line">  stage: pull</span><br><span class="line">  only:</span><br><span class="line">    - <span class="built_in">test</span></span><br><span class="line">  tags:</span><br><span class="line">    - run213</span><br><span class="line">  script:</span><br><span class="line">    - <span class="built_in">cd</span> <span class="variable">$CI_PROJECT_DIR</span> &amp;&amp; git pull</span><br><span class="line"><span class="comment">###################################【git pull code】end ###################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###################################【h-vul-main】start ###################################</span></span><br><span class="line">build-main-job:</span><br><span class="line">  stage: build</span><br><span class="line">  needs:</span><br><span class="line">    - pull-code-job</span><br><span class="line">  only:</span><br><span class="line">    - <span class="built_in">test</span></span><br><span class="line">  tags:</span><br><span class="line">    - run213</span><br><span class="line">  script:</span><br><span class="line">    - <span class="built_in">cd</span> <span class="variable">$CI_PROJECT_DIR</span> &amp;&amp; npm install --production &amp;&amp; npm install sass-loader &amp;&amp; npm run build</span><br><span class="line"><span class="comment">###################################【h-vul-main】end ###################################</span></span><br><span class="line"></span><br><span class="line">deploy-main-job:</span><br><span class="line">  stage: deploy</span><br><span class="line">  needs:</span><br><span class="line">    - build-main-job</span><br><span class="line">  only:</span><br><span class="line">    - <span class="built_in">test</span></span><br><span class="line">  tags:</span><br><span class="line">    - run213</span><br><span class="line">  script:</span><br><span class="line">    - <span class="built_in">cd</span> <span class="variable">$CI_PROJECT_DIR</span> &amp;&amp; sh deploy_docker.sh</span><br><span class="line"></span><br><span class="line">push-main-job:</span><br><span class="line">  stage: push</span><br><span class="line">  when: manual</span><br><span class="line">  variables:</span><br><span class="line">    PRO_NAME: h-wei</span><br><span class="line">    SERVICE_NAME: h-public-report</span><br><span class="line">    TAG: 1.0.0 <span class="comment"># 通过手动执行CI流程，指定TAG名称</span></span><br><span class="line">  needs:</span><br><span class="line">    - deploy-main-job</span><br><span class="line">  only:</span><br><span class="line">    - <span class="built_in">test</span></span><br><span class="line">  tags:</span><br><span class="line">    - run213</span><br><span class="line">  script:</span><br><span class="line">    - &gt;</span><br><span class="line">      <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$TAG</span>&quot;</span> == <span class="string">&quot;<span class="variable">$SERVICE_TAG</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">         docker push harbor.huaun.com:11443/<span class="variable">$PRO_NAME</span>/<span class="variable">$SERVICE_NAME</span>:<span class="variable">$SERVICE_TAG</span></span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">         docker tag harbor.huaun.com:11443/<span class="variable">$PRO_NAME</span>/<span class="variable">$SERVICE_NAME</span>:<span class="variable">$SERVICE_TAG</span> harbor.huaun.com:11443/<span class="variable">$PRO_NAME</span>/<span class="variable">$SERVICE_NAME</span>:<span class="variable">$TAG</span></span><br><span class="line">         docker push harbor.huaun.com:11443/<span class="variable">$PRO_NAME</span>/<span class="variable">$SERVICE_NAME</span>:<span class="variable">$TAG</span></span><br><span class="line">         docker rmi harbor.huaun.com:11443/<span class="variable">$PRO_NAME</span>/<span class="variable">$SERVICE_NAME</span>:<span class="variable">$TAG</span></span><br><span class="line">      <span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h3 id="根目录新增deploy-docker-sh"><a href="#根目录新增deploy-docker-sh" class="headerlink" title="根目录新增deploy_docker.sh"></a>根目录新增deploy_docker.sh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">pro_name=h-wei</span><br><span class="line">service_name=h-public-report</span><br><span class="line">version=1.0.0</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$1</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"> pro_name=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$2</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"> service_name=<span class="variable">$2</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$3</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line"> version=<span class="variable">$3</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shellcheck disable=SC2164</span></span><br><span class="line">CURRENT_DIR=$(<span class="built_in">cd</span> <span class="string">&quot;<span class="subst">$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>&quot;</span>; <span class="built_in">pwd</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;进入目录：<span class="variable">$&#123;CURRENT_DIR&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># shellcheck disable=SC2164</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$&#123;CURRENT_DIR&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#########################检测旧的镜像文件以及正在运行的容器#########################&quot;</span></span><br><span class="line"><span class="comment"># shellcheck disable=SC2006</span></span><br><span class="line">CID_LIST=`docker ps -a --format <span class="string">&quot;&#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;&quot;</span> | grep harbor.huaun.com:11443/<span class="variable">$&#123;pro_name&#125;</span>/<span class="variable">$&#123;service_name&#125;</span>:<span class="variable">$&#123;version&#125;</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>`</span><br><span class="line"><span class="keyword">for</span> CID <span class="keyword">in</span> <span class="variable">$&#123;CID_LIST&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;关闭容器:<span class="variable">$&#123;CID&#125;</span>&quot;</span></span><br><span class="line">docker stop <span class="string">&quot;<span class="variable">$&#123;CID&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;删除容器:<span class="variable">$&#123;CID&#125;</span>&quot;</span></span><br><span class="line">docker rm <span class="string">&quot;<span class="variable">$&#123;CID&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shellcheck disable=SC2006</span></span><br><span class="line">IMAGES_LIST=`docker images --format <span class="string">&quot;&#123;&#123;.Repository&#125;&#125;:&#123;&#123;.Tag&#125;&#125;&quot;</span> | grep harbor.huaun.com:11443/<span class="variable">$&#123;pro_name&#125;</span>/<span class="variable">$&#123;service_name&#125;</span>:<span class="variable">$&#123;version&#125;</span>`</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$&#123;IMAGES_LIST&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="comment"># shellcheck disable=SC2162</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;IMAGES_LIST&#125;</span>&quot;</span> | <span class="keyword">while</span> <span class="built_in">read</span> IMAGE_LINE</span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$&#123;IMAGE_LINE&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;删除旧的镜像文件:<span class="variable">$&#123;IMAGE_LINE&#125;</span>&quot;</span></span><br><span class="line">        docker rmi <span class="string">&quot;<span class="variable">$&#123;IMAGE_LINE&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shellcheck disable=SC2034</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$&#123;CURRENT_DIR&#125;</span>&quot;</span> &amp;&amp; docker build -f <span class="string">&quot;<span class="variable">$&#123;CURRENT_DIR&#125;</span>&quot;</span>/Dockerfile -t harbor.huaun.com:11443/<span class="variable">$&#123;pro_name&#125;</span>/<span class="variable">$&#123;service_name&#125;</span>:<span class="variable">$&#123;version&#125;</span> .</span><br><span class="line"></span><br><span class="line">docker run -d --name=<span class="variable">$&#123;service_name&#125;</span> --net=host harbor.huaun.com:11443/<span class="variable">$&#123;pro_name&#125;</span>/<span class="variable">$&#123;service_name&#125;</span>:<span class="variable">$&#123;version&#125;</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">崔渊</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://yuancy1009.github.io/2022/06/29/%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8/">https://yuancy1009.github.io/2022/06/29/%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://yuancy1009.github.io" target="_blank">CY的笔记</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fstatic001.infoq.cn%2Fresource%2Fimage%2F6e%2F24%2F6e1baf91e53fce11a3e242797e747424.jpg&amp;refer=http%3A%2F%2Fstatic001.infoq.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1659079619&amp;t=3d0593a933fc2dba281057a727b00e93" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/06/29/Docker%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86/"><img class="prev-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fblog.daocloud.io%2Fwp-content%2Fuploads%2F2017%2F04%2FVolPlugin-768x359.png&amp;refer=http%3A%2F%2Fblog.daocloud.io&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1659080093&amp;t=a956a699d6fce3558f9e3e7e8e09e04d" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Docker的安装与配置及镜像管理</div></div></a></div><div class="next-post pull-right"><a href="/2022/04/28/%E5%B8%B8%E7%94%A8linux%E5%91%BD%E4%BB%A4/"><img class="next-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.h3399.cn%2Fuploads%2Fbody%2F1252%2F397fd5949939.jpg&amp;refer=http%3A%2F%2Fwww.h3399.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1653720231&amp;t=891a16cbf7b969ea32cd725c530ca4b6" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">常用linux命令</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">崔渊</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yuancy1009"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Docker"><span class="toc-number">1.</span> <span class="toc-text">什么是 Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker%E8%B7%9F%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">docker跟虚拟机有什么区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-%E6%8A%80%E6%9C%AF%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">3.</span> <span class="toc-text">docker 技术的优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BD%BF%E7%94%A8-docker-%E6%9C%89%E5%93%AA%E4%BA%9B%E5%A5%BD%E5%A4%84%EF%BC%9F"><span class="toc-number">4.</span> <span class="toc-text">前端使用 docker 有哪些好处？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2%E9%AB%98%E6%95%88%EF%BC%8C%E4%B8%94%E5%88%A9%E4%BA%8E%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB"><span class="toc-number">4.1.</span> <span class="toc-text">部署高效，且利于项目迁移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%8C%96%E4%BA%86%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%EF%BC%8C%E9%83%A8%E7%BD%B2%E6%9B%B4%E5%8A%A0%E7%A8%B3%E5%AE%9A%E5%8F%AF%E9%9D%A0"><span class="toc-number">4.2.</span> <span class="toc-text">标准化了运行环境，部署更加稳定可靠</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%98%93%E4%BA%8E%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%92%8C%E9%83%A8%E7%BD%B2-CI-CD"><span class="toc-number">4.3.</span> <span class="toc-text">更易于持续交付和部署(CI&#x2F;CD)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%BB%B4%E6%9B%B4%E5%8A%A0%E9%AB%98%E6%95%88%EF%BC%8C%E7%A7%92%E7%BA%A7%E5%9B%9E%E6%BB%9A"><span class="toc-number">4.4.</span> <span class="toc-text">运维更加高效，秒级回滚</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Docker"><span class="toc-number">5.</span> <span class="toc-text">使用Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BADockerfile"><span class="toc-number">5.1.</span> <span class="toc-text">创建Dockerfile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99Dockerfile"><span class="toc-number">5.2.</span> <span class="toc-text">编写Dockerfile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E9%95%9C%E5%83%8F"><span class="toc-number">5.3.</span> <span class="toc-text">打包镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.</span> <span class="toc-text">上传镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8"><span class="toc-number">5.5.</span> <span class="toc-text">启动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CI%E9%85%8D%E7%BD%AE"><span class="toc-number">6.</span> <span class="toc-text">CI配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%96%B0%E5%A2%9E-gitlab-ci-yml"><span class="toc-number">6.1.</span> <span class="toc-text">根目录新增.gitlab-ci.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%96%B0%E5%A2%9Edeploy-docker-sh"><span class="toc-number">6.2.</span> <span class="toc-text">根目录新增deploy_docker.sh</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/07/14/Qiankun-Nuxt%E5%BE%AE%E5%BA%94%E7%94%A8%E9%9D%99%E6%80%81%E5%8C%96%E9%83%A8%E7%BD%B2/" title="Qiankun+Nuxt微应用静态化部署"><img src="https://inews.gtimg.com/newsapp_bt/0/13907260590/1000" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qiankun+Nuxt微应用静态化部署"/></a><div class="content"><a class="title" href="/2022/07/14/Qiankun-Nuxt%E5%BE%AE%E5%BA%94%E7%94%A8%E9%9D%99%E6%80%81%E5%8C%96%E9%83%A8%E7%BD%B2/" title="Qiankun+Nuxt微应用静态化部署">Qiankun+Nuxt微应用静态化部署</a><time datetime="2022-07-14T05:22:34.000Z" title="发表于 2022-07-14 13:22:34">2022-07-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/29/%E5%BE%AE%E5%89%8D%E7%AB%AF%E8%AE%BF%E9%97%AE%E5%AD%90%E5%BA%94%E7%94%A8%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/" title="微前端访问子应用跨域问题"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic2.zhimg.com%2Fv2-d12a29de3e75400d5d8b443961571ed7_1440w.jpg%3Fsource%3D172ae18b&amp;refer=http%3A%2F%2Fpic2.zhimg.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1659080489&amp;t=9d5c4b1bcbfaf8878881f8907de9af1e" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微前端访问子应用跨域问题"/></a><div class="content"><a class="title" href="/2022/06/29/%E5%BE%AE%E5%89%8D%E7%AB%AF%E8%AE%BF%E9%97%AE%E5%AD%90%E5%BA%94%E7%94%A8%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/" title="微前端访问子应用跨域问题">微前端访问子应用跨域问题</a><time datetime="2022-06-29T07:38:15.000Z" title="发表于 2022-06-29 15:38:15">2022-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/29/Docker%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86/" title="Docker的安装与配置及镜像管理"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fblog.daocloud.io%2Fwp-content%2Fuploads%2F2017%2F04%2FVolPlugin-768x359.png&amp;refer=http%3A%2F%2Fblog.daocloud.io&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1659080093&amp;t=a956a699d6fce3558f9e3e7e8e09e04d" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker的安装与配置及镜像管理"/></a><div class="content"><a class="title" href="/2022/06/29/Docker%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%95%9C%E5%83%8F%E7%AE%A1%E7%90%86/" title="Docker的安装与配置及镜像管理">Docker的安装与配置及镜像管理</a><time datetime="2022-06-29T07:31:12.000Z" title="发表于 2022-06-29 15:31:12">2022-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/29/%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8/" title="使用Docker部署前端应用"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fstatic001.infoq.cn%2Fresource%2Fimage%2F6e%2F24%2F6e1baf91e53fce11a3e242797e747424.jpg&amp;refer=http%3A%2F%2Fstatic001.infoq.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1659079619&amp;t=3d0593a933fc2dba281057a727b00e93" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Docker部署前端应用"/></a><div class="content"><a class="title" href="/2022/06/29/%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%E5%BA%94%E7%94%A8/" title="使用Docker部署前端应用">使用Docker部署前端应用</a><time datetime="2022-06-29T06:27:44.000Z" title="发表于 2022-06-29 14:27:44">2022-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/28/%E5%B8%B8%E7%94%A8linux%E5%91%BD%E4%BB%A4/" title="常用linux命令"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.h3399.cn%2Fuploads%2Fbody%2F1252%2F397fd5949939.jpg&amp;refer=http%3A%2F%2Fwww.h3399.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1653720231&amp;t=891a16cbf7b969ea32cd725c530ca4b6" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="常用linux命令"/></a><div class="content"><a class="title" href="/2022/04/28/%E5%B8%B8%E7%94%A8linux%E5%91%BD%E4%BB%A4/" title="常用linux命令">常用linux命令</a><time datetime="2022-04-28T06:39:24.000Z" title="发表于 2022-04-28 14:39:24">2022-04-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 崔渊</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>